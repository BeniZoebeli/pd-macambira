Index: configure.in
===================================================================
RCS file: /cvsroot/pure-data/pd/src/configure.in,v
retrieving revision 1.8
diff -r1.8 configure.in
14a15
> AC_SUBST(TCLTK_FRAMEWORKS_PATH)
175a177,178
> 
> 
212a216,233
> 
>     if test x$jack == "xyes";
>     then
>         LDFLAGS=$LDFLAGS" -lrt -ljack"
>     fi
>     if test x$jack == "xrun";
>     then
>         LDFLAGS=$LDFLAGS" -lrt -ljack"
>     fi
>     fi
> 
>     if test x$jack == "xyes";
>     then
>         LDFLAGS=$LDFLAGS" -lrt -ljack"
>     fi
>     if test x$jack == "xrun";
>     then
>         LDFLAGS=$LDFLAGS" -lrt -ljack"
242,246c263,281
<     GUINAME="pdtcl"
<     GUIFLAGS="-F../../Frameworks -framework Tcl -framework Tk \
<         -I../../Frameworks/Tk.framework/Versions/Current/Headers \
<         -I../../Frameworks/Tcl.framework/Versions/Current/Headers \
<         -I../../Frameworks/Tcl.framework/Versions/8.4/PrivateHeaders"
---
>     GUINAME="libPdTcl.dylib"
> 
> # find the Tcl/Tk Frameworks
>  	 if test -d "../../Frameworks";
>     then
>         # Miller's location
>         TCLTK_FRAMEWORKS_PATH="../../Frameworks"
>  	 elif test -d "/Library/Frameworks";
> 	 then
>         # get it from the default install location
>         TCLTK_FRAMEWORKS_PATH="/Library/Frameworks"
>     else
>         # Panther has Tcl here; Tiger has Tcl and Tk here
>         TCLTK_FRAMEWORKS_PATH="/System/Library/Frameworks"
>     fi		 
>     GUIFLAGS="-F$TCLTK_FRAMEWORKS_PATH -framework Tcl -framework Tk \
>         -I$TCLTK_FRAMEWORKS_PATH/Tk.framework/Versions/Current/Headers \
>         -I$TCLTK_FRAMEWORKS_PATH/Tcl.framework/Versions/Current/Headers \
>         -I$TCLTK_FRAMEWORKS_PATH/Tcl.framework/Versions/8.4/PrivateHeaders"
258,259c294,297
< 	MORECFLAGS=$MORECFLAGS" -DUSEAPI_JACK"
< 	SYSSRC=$SYSSRC" s_audio_jack.c"
---
>     fi
>     if test x$jack == "xrun";
>     then
>         LDFLAGS=$LDFLAGS" -framework Jack"
269d306
<     LDFLAGS=$LDFLAGS" -lrt -ljack"
275d311
<     LDFLAGS=$LDFLAGS" -lrt -ljack"
Index: makefile.in
===================================================================
RCS file: /cvsroot/pure-data/pd/src/makefile.in,v
retrieving revision 1.6
diff -r1.6 makefile.in
100,104c100,110
< $(BIN_DIR)/pdtcl: $(GOBJ) $(GSRC)
< 	cd ../obj; libtool -dynamic -o $(BIN_DIR)/pdtcl $(GOBJ) \
< 	../../Frameworks/Tk.framework/Versions/Current/Tk \
< 	../../Frameworks/Tcl.framework/Versions/Current/Tcl \
< 	/usr/lib/libSystem.B.dylib
---
> $(BIN_DIR)/libPdTcl.dylib: $(GOBJ) $(GSRC)
> 	cd ../obj && $(CC) -dynamiclib -read_only_relocs warning  \
> 		-o $(BIN_DIR)/libPdTcl.dylib $(GOBJ)  \
> 		-F@TCLTK_FRAMEWORKS_PATH@ \
> 		-framework Tcl  -framework Tk  -framework System  \
> 		-Wl,-install_name,@executable_path/../Resources/bin/libPdTcl.dylib
> 	install_name_tool -change @TCLTK_FRAMEWORKS_PATH@/Tcl.framework/Versions/8.4/Tcl\
> 		 @executable_path/../Frameworks/Tcl.framework/Versions/8.4/Tcl \
> 		 -change @TCLTK_FRAMEWORKS_PATH@/Tk.framework/Versions/8.4/Tk \
> 		 @executable_path/../Frameworks/Tk.framework/Versions/8.4/Tk \
> 		../bin/libPdTcl.dylib
Index: u_main.tk
===================================================================
RCS file: /cvsroot/pure-data/pd/src/u_main.tk,v
retrieving revision 1.9
diff -r1.9 u_main.tk
51c51
<     load $pd_guidir/bin/pdtcl
---
>     load $pd_guidir/bin/libPdTcl.dylib
